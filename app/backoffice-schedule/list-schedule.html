<md-content layout="row" layout-sm="column" layout-wrap  id="establishments-schedule-container"
            ng-controller="BackOfficeCoursesController as coursesVM">
    <h1 class="md-display-2" ng-show="!coursesVM.addSchedView">Horarios</h1>
    <p ng-show="!coursesVM.addSchedView">Desde aquí podrás ver los horarios de los curos, eliminarlos, y añadir nuevos. Primero deberás seleccionar el
    establecimiento y curso, del cual quieres consultar los horarios.</p>
    <md-input-container class="md-block" flex="40" ng-show="coursesVM.selectedC == null && !coursesVM.addView">
        <label>Establecimiento</label>
        <md-select ng-model="coursesVM.selectedEst" md-on-close="coursesVM.getCourses(coursesVM.selectedEst,ev)"
                   flex="100" id="list-ests-sched">
            <md-option ng-repeat="est in coursesVM.fullEstabs" value="{{est.id}}">{{est.name}}</md-option>
        </md-select >
    </md-input-container>
    <div flex="5" ng-if="coursesVM.selectedC == null && !coursesVM.addView"></div>
    <md-input-container class="md-block" flex="40"  ng-show="coursesVM.currentCourses.length > 0 && coursesVM.selectedC == null">
        <label>Curso</label>
        <md-select ng-model="coursesVM.selectedCourse"
                   flex="100" id="list-courses-sched" md-on-close="coursesVM.getSchedule(coursesVM.selectedCourse)">
            <md-option ng-repeat="course in coursesVM.currentCourses" value="{{course.id}}">{{course.info}}({{course.Sport.name}})</md-option>
        </md-select>
    </md-input-container>
    <md-content layout="row" layout-sm="column" layout-wrap  id="establishments-list-schedule-container"
                ng-show="coursesVM.schedule.length > 0 && !coursesVM.addSchedView" flex="100">
        <md-list id="schedule-list-backoffice" flex="100">
            <md-list-item class="md-3-line" ng-repeat="item in coursesVM.schedule" id="schedule-{{item.id}}">
                <div class="md-list-item-text">
                    <h3>{{item.day}}</h3>
                    <p>{{item.startTime}} - {{item.endTime}}</p>
                </div>
                <div layout-align="right">
                    <md-button delete-sc class="md-icon-button md-button md-ink-ripple" type="button" aria-label="Eliminar"
                               id="delete-schedule-{{coursesVM.selectedCourse}}" name="{{item.id}}" style="margin-top: 20px"
                    ng-click="coursesVM.deleteSchedule(item.id,ev)">
                        <md-icon md-svg-icon="public/images/icons/delete.svg" aria-hidden="true" id="est-schedule-delete-{{item.id}}"></md-icon>
                        <md-tooltip md-direction="top">
                            Eliminar hora
                        </md-tooltip>
                    </md-button>
                </div>
                <md-divider ng-if="!$last"></md-divider>
            </md-list-item>
        </md-list>
    </md-content>
    <md-content layout="row" layout-sm="column" layout-wrap  id="establishments-add-schedule-container" flex="100"
    ng-show="coursesVM.addSchedView">
        <h1 class="md-display-2">Añadir Nueva Hora</h1>
        <form name="addScheduleForm" novalidate layout="row" layout-wrap flex="100"
        ng-submit="addScheduleForm.sday.$valid && addScheduleForm.sstar.$valid && addScheduleForm.send.$valid &&
        coursesVM.addSchedule(coursesVM.newSchedule,addScheduleForm,ev)">
            <md-input-container class="md-block" flex="100">
                <label>Día (En el que se impartirá el curso)</label>
                <md-select ng-model="coursesVM.newSchedule.day" md-on-close="coursesVM.getCourses(coursesVM.selectedEst,ev)"
                           flex="100" id="sday" name="sday" required>
                    <md-option value="Lunes">Lunes</md-option>
                    <md-option value="Martes">Martes</md-option>
                    <md-option value="Miércoles">Miércoles</md-option>
                    <md-option value="Jueves">Jueves</md-option>
                    <md-option value="Viernes">Viernes</md-option>
                    <md-option value="Sábado">Sábado</md-option>
                    <md-option value="Domingo">Domingo</md-option>
                </md-select>
                <div ng-messages="addScheduleForm.sday.$error" ng-show="addScheduleForm.sday.$touched || addScheduleForm.$submitted">
                    <div ng-message="required" class="input-error" name="rday">El día es obligatorio.</div>
                </div>
            </md-input-container>
            <md-input-container class="md-block" flex="100">
                <label>Inicio (La hora de inicio de la clase p.ej 10:00)</label>
                <input required="" name="sstar" ng-model="coursesVM.newSchedule.startTime" flex="40"
                       ng-pattern="/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/"/>
                <div ng-messages="addScheduleForm.sstar.$error" ng-show="addScheduleForm.sstar.$touched || addScheduleForm.$submitted">
                    <div ng-message="required" class="input-error" name="rstart">La hora de incio es obligatoria.</div>
                    <div ng-show="addScheduleForm.sstar.$error.pattern" class="input-error" name="pstart">
                        <p>El formato de hora no es correcto. Debe ser hh:mm</p>
                    </div>
                </div>
            </md-input-container>
            <div flex="5"></div>
            <md-input-container class="md-block" flex="100">
                <label>Final (La hora en que termina la clase p.ej 11:00)</label>
                 <input required="" name="send" ng-model="coursesVM.newSchedule.endTime" flex="40"
                        ng-pattern="/^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/"/>
                  <div ng-messages="addScheduleForm.send.$error" ng-show="addScheduleForm.send.$touched || addScheduleForm.$submitted">
                      <div ng-message="required" class="input-error" name="rstart">La hora de finalicación es obligatoria.</div>
                      <div ng-show="addScheduleForm.send.$error.pattern" class="input-error" name="pend">
                          <p>El formato de hora no es correcto. Debe ser hh:mm</p>
                      </div>
                  </div>
            </md-input-container>
            <md-input-container class="md-block" flex="100">
                <md-button type="submit" class="md-raised md-primary" id="add-schedule-btn" name="add-schedule-btn">
                    Añadir
                </md-button>
            </md-input-container>
        </form>
    </md-content>
    <md-input-container flex="100" style="padding: 0px">
        <md-button ng-show="coursesVM.schedule.length > 0 && !coursesVM.addSchedView" class="md-fab md-primary add-btn" aria-label="Añadir Nuevo"
                   id="addSched"  ng-click="coursesVM.addSchedView = true" name="add-sched">
            <md-icon md-svg-icon="public/images/icons/add.svg" aria-hidden="true""></md-icon>
            <md-tooltip md-direction="right">
                Añadir Nueva Hora
            </md-tooltip>
        </md-button>
        <md-button class="md-fab md-default add-btn" aria-label="Volver a Cursos" id="listSchedule"
                    name="list-schedule" ng-click="coursesVM.backToList()" ng-show="coursesVM.schedule.length > 0">
            <md-icon md-svg-icon="public/images/icons/arrow_back.svg" aria-hidden="true""></md-icon>
            <md-tooltip md-direction="right">
                Volver a selección de Horario
            </md-tooltip>
        </md-button>
    </md-input-container>
</md-content>
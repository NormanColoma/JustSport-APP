<link rel="stylesheet" type="text/css" href="public/stylesheets/list-estabs.css">
<div>
    <div class="container" ng-show="!estFlVm.activated">
        <md-progress-linear md-mode="query""></md-progress-linear>
        <div class="bottom-block">
            <span>Buscando establecimientos...</span>
        </div>
    </div>
    <md-content layout="row" layout-sm="column" layout-wrap id="establishments-list-container" style="background-color: inherit;">
        <div class="est-search-container" flex="33" hide-sm hide-xs ng-repeat="item in estFlVm.items" ng-controller="ShowScheduleController as showScVm"
             ng-show="estDtVm.establishment === null">
            <md-card>
                <img ng-src="{{estFlVm.imgFolder+item.main_img}}" class="md-card-image" alt="{{estFlVm.imgFolder+item.main_img}}" src="{{estFlVm.imgFolder+item.main_img}}">
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline color-primary">{{item.name}}</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content>
                    <p class="md-body-1">
                        {{estFlVm.shortenDesc(item.desc)}}
                    </p>
                </md-card-content>
                <md-card-actions layout="row" layout-align="end center" class="layout-align-end-center layout-row">
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button" aria-label="Información" scroll-to
                            id="scrollResults"  ng-click="estDtVm.getEstablishment(item.id)" name="{{item.id}}">
                        <md-icon md-svg-icon="public/images/icons/info.svg" aria-hidden="true" id="est-details-{{item.id}}"></md-icon>
                        <md-tooltip md-direction="top">
                            Información sobre {{item.name}}
                        </md-tooltip>
                    </md-button>
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button"  aria-label="Horarios"
                             ng-click="showScVm.showSchedule(ev, item.id)">
                        <md-tooltip md-direction="top">
                            Horario clases
                        </md-tooltip>
                        <md-icon md-svg-icon="public/images/icons/date.svg" aria-hidden="true" id="showSchedule"></md-icon>
                    </md-button>
                </md-card-actions>
            </md-card>
        </div>
        <div flex="100" show-sm hide-gt-sm hide-xs ng-repeat="item in estFlVm.items"
             ng-controller="ShowScheduleController as showScVm" ng-if="estDtVm.establishment === null">
            <md-card>
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline">{{item.name}}</span>
                        <span class="md-subhead">{{estFlVm.shortenDesc(item.desc)}}</span>
                    </md-card-title-text>
                    <md-card-title-media>
                        <div class="md-media-lg card-media">
                            <img ng-src="{{estFlVm.imgFolder+item.main_img}}" class="md-card-image" alt="{{estFlVm.imgFolder+item.main_img}}" src="{{estFlVm.imgFolder+item.main_img}}">
                        </div>
                    </md-card-title-media>
                </md-card-title>
                <md-card-actions layout="row" layout-align="end center" class="layout-align-end-center layout-row">
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button" aria-label="Información"
                            ng-click="estDtVm.getEstablishment(item.id)" name="{{item.id}}" title="Información sobre {{item.name}}">
                        <md-icon md-svg-icon="public/images/icons/info.svg" aria-hidden="true"></md-icon>
                    </md-button>
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button"  aria-label="Horarios"
                            tille="Horarios clases" ng-click="showScVm.showSchedule(ev, item.id)">
                        <md-icon md-svg-icon="public/images/icons/date.svg" aria-hidden="true"></md-icon>
                    </md-button>
                </md-card-actions>
            </md-card>
        </div>
        <div class="est-search-container" flex="100" hide-gt-lg hide-gt hide-gt-sm hide-sm show-xs ng-repeat="item in estFlVm.items" ng-controller="ShowScheduleController as showScVm"
             ng-show="estDtVm.establishment === null">
            <md-card>
                <img ng-src="{{estFlVm.imgFolder+item.main_img}}" class="md-card-image" alt="{{estFlVm.imgFolder+item.main_img}}" src="{{estFlVm.imgFolder+item.main_img}}">
                <md-card-title>
                    <md-card-title-text>
                        <span class="md-headline color-primary">{{item.name}}</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content>
                    <p class="md-body-1">
                        {{estFlVm.shortenDesc(item.desc)}}
                    </p>
                </md-card-content>
                <md-card-actions layout="row" layout-align="end center" class="layout-align-end-center layout-row">
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button" aria-label="Información" scroll-to
                               id="getDetails"  ng-click="estDtVm.getEstablishment(item.id)" name="{{item.id}}">
                        <md-icon md-svg-icon="public/images/icons/info.svg" aria-hidden="true" id="est-details-{{item.id}}"></md-icon>
                        <md-tooltip md-direction="top">
                            Información sobre {{item.name}}
                        </md-tooltip>
                    </md-button>
                    <md-button class="md-icon-button md-button md-ink-ripple" type="button"  aria-label="Horarios"
                               ng-click="showScVm.showSchedule(ev, item.id)">
                        <md-tooltip md-direction="top">
                            Horario clases
                        </md-tooltip>
                        <md-icon md-svg-icon="public/images/icons/date.svg" aria-hidden="true" id="showSchedule"></md-icon>
                    </md-button>
                </md-card-actions>
            </md-card>
        </div>
        <establishment-details ng-show="estDtVm.establishment !== null",flex="95" flex-md="95" flex-sm="95" class="est-container"></establishment-details>
    </md-content>
    <a class="md-caption fetch-more-link" ng-click="estFlVm.fetchMore()" ng-show="estFlVm.after != 'none' && estFlVm.after != 0 && estDtVm.establishment === null">Cargar más resultados</a>
</div>

